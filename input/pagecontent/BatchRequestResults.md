### Overview

This page describes step 3 of the Asynchronous Bulk Data Export Process Workflow - retrieving the request results.

<div style="padding: 1em; border-top: 1px solid #ddd;">
  <figure>
    {% include AsyncBatchExportActivityDiagramResults.svg %}
  </figure>
</div>

Fetching results has four key components:

1. Preconditions
2. Request to server
3. Responses from server
4. Output file request

### Preconditions

The following preconditions, as documented in the [status polling function](BatchRequestStatus.html), **SHALL** be met before retrieving the results of a bulk data export request:

1. The client must have received a `200 OK` response from the status polling request, indicating that the job is complete
2. The response's `output.url` must be stored for use in retrieving the results

### Request to server

Using the full url returned by the server, the client performs a final POST against the output URL to retrieve the outcome of the batch export.

#### HTTP method

The results are retrieved using the standard FHIR `POST` method to the output URL provided by the server. 

#### Request body

No request body is required.

#### Example request

Request HTTP header

```
POST [base]/Binary/VMxYkAvCKldql5wVAW2G7OKfTIvLnOsn
Accept: application/fhir+ndjson
```

Request HTTP body

Absent

### Responses from server

#### Success response

The server responds with a `200 OK` status code and a `Content-Location` header indicating the location of the results file.

Response HTTP header

```
HTTP/1.1 200 OK
Content-Location: https://fhir-xrp.digitalhealth.gov.au/fhir/Binary/VMxYkAvCKldql5wVAW2G7OKfTIvLnOsn/_history/1
Content-Disposition: Attachment;
Content-Type: application/fhir+ndjson
Content-Length: 8058
Date: Tue, 11 Nov 2025 00:37:48 GMT
```

### Output file request

Clients can request the output files generated by the batch job by sending a `POST` request to the URLs provided in the `output` array of the job results.

Using the URLs supplied by the FHIR server in the Complete Status response body, a client MAY download the generated output files (one or more per resource type) within the time period specified in the Expires header (if present). If the requiresAccessToken field in the Complete Status body is set to true, the request SHALL include a valid access token.

The output files are in ndjson format, with one FHIR resource per line.

Example of a Location resource NDJSON file content in Health Connect Provider Directory:

```json
{"resourceType":"Location","id":"hc-location-ex-connectathon-1","meta":{"versionId":"3","lastUpdated":"2026-01-22T03:51:37.146+00:00","profile":["http://ns.electronichealth.net.au/hc/StructureDefinition/hc-location"],"extensions":[{"url":"http://ns.electronichealth.net.au/hc/StructureDefinition/hc-geographical-extract","valueCodeableConcept":{"coding":[{"system":"http://ns.electronichealth.net.au/hc/CodeSystem/extract-scope","code":"NSW-BORDERING","display":"NSW with bordering areas"}]}}]},"extension":[{"url":"http://ns.electronichealth.net.au/hc/StructureDefinition/hc-preferred-postal-address","valueAddress":{"use":"work","type":"postal","text":"PO Box 123, SYDNEY NSW 2000","line":["PO Box 123"],"city":"SYDNEY","state":"NSW","postalCode":"2000","country":"AU"}},{"url":"http://ns.electronichealth.net.au/hc/StructureDefinition/hc-amenity","valueCodeableConcept":{"coding":[{"system":"https://healthterminologies.gov.au/fhir/CodeSystem/facility-amenity-1","code":"wheelchairAccess","display":"Wheelchair Access"}]}}],"identifier":[{"type":{"coding":[{"system":"http://terminology.hl7.org.au/CodeSystem/v2-0203","code":"NATAS","display":"NATA Site Number"}],"text":"NATA Site Number"},"system":"http://hl7.org.au/id/nata-site","value":"162899"},{"type":{"coding":[{"system":"http://terminology.hl7.org.au/CodeSystem/v2-0203","code":"LSPN","display":"Location Specific Practice Number"}],"text":"LSPN"},"system":"http://ns.electronichealth.net.au/id/location-specific-practice-number","value":"123333"}],"name":"Physical location at Wynnumwith wheelchair access","alias":["Ye Old Physical location at Wynnum with wheelchair access"],"type":[{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/v3-RoleCode","code":"MOBL","display":"Mobile Unit"},{"system":"http://terminology.hl7.org/CodeSystem/v3-RoleCode","code":"PTRES","display":"Patient's Residence"}]}],"telecom":[{"system":"phone","value":"(02) 1234 5678","use":"work"},{"system":"email","value":"info@location.com.au","use":"work"},{"system":"url","value":"https://www.mocklocation.com.au","use":"work"},{"system":"fax","value":"+61 2 9999 8888","use":"work"}],"address":{"extension":[{"url":"http://hl7.org.au/fhir/StructureDefinition/address-identifier","valueIdentifier":{"type":{"coding":[{"system":"http://terminology.hl7.org.au/CodeSystem/v2-0203","code":"GNAF","display":"Geocoded National Address File Identifier"}],"text":"G-NAF"},"system":"http://hl7.org.au/id/gnafidentifier","value":"GANSW718473771"}}],"type":"physical","text":"123 Bay Terrace Wynnum QLD 4178 Australia","line":["123 Bay Terrace","147-153 Castlereagh Street"],"city":"WYNNUM","state":"QLD","postalCode":"4178","country":"AU"},"position":{"longitude":151.2093,"latitude":-33.8688},"managingOrganization":{"reference":"Organization/example-healthconnect-organization-1"}}
```